{"version":3,"file":"static/webpack/static/development/pages/index.js.a66e0dc9ed95d10c05c1.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import { NextSeo } from 'next-seo';\nimport {\n  Container,\n  Row,\n  Col,\n  Card,\n  Badge,\n} from 'react-bootstrap';\nimport fetch from 'isomorphic-unfetch';\nimport Moment from 'react-moment';\nimport BaseLayout from '../components/BaseLayout';\nimport CasesOverview from '../components/CasesOverview';\nimport CasesLineChart from '../components/CasesLineChart';\nimport CasesBarChart from '../components/CasesBarChart';\nimport { useState } from 'react';\n\nconst Index = () => {\n  const [totalsData, setTotalsData] = useState({});\n  const [dateCasesData, setDateCasesData] = useState({});\n  const [dateDiffCasesData, setDateDiffCasesData] = useState({});\n\n  const prepareChartData = (dataset) => {\n    if (dataset == null) return;\n\n    return Object.fromEntries(\n      Object.entries(dataset).map((entry) => [entry[0], entry[1].cases]),\n    )\n  };\n\n  const fetchData = async (data) => {\n    try {\n      const totalsDataset = await fetch('https://raw.githubusercontent.com/COVID-19-Bulgaria/covid-database/master/Bulgaria/TotalsDataset.json');\n      setTotalsData(await totalsDataset.json());\n\n      const dateCasesDataset = await fetch('https://raw.githubusercontent.com/COVID-19-Bulgaria/covid-database/master/Bulgaria/DateCasesDataset.json');\n      setDateCasesData(await dateCasesDataset.json());\n\n      const dateDiffCasesDataset = await fetch('https://raw.githubusercontent.com/COVID-19-Bulgaria/covid-database/master/Bulgaria/DateDiffCasesDataset.json');\n      setDateDiffCasesData(await dateDiffCasesDataset.json());\n    } catch (error) {\n      const { response } = error;\n\n      if (response) {\n        const parsedResponse = await response.json();\n        console.log(parsedResponse.message);\n      }\n    }\n  };\n\n  fetchData();\n\n  const lineChartData = [\n    { name: 'Заразени', data: prepareChartData(dateCasesData.infected) },\n    { name: 'Излекувани', data: prepareChartData(dateCasesData.cured) },\n    { name: 'Жертви', data: prepareChartData(dateCasesData.fatal) },\n  ];\n\n  const barChartData = [\n    { name: 'Заразени', data: prepareChartData(dateDiffCasesData.infected) },\n    { name: 'Излекувани', data: prepareChartData(dateDiffCasesData.cured) },\n    { name: 'Жертви', data: prepareChartData(dateDiffCasesData.fatal) },\n  ];\n\n  return (\n    <BaseLayout>\n      <NextSeo\n        openGraph={{\n          images: [\n            {\n              url: `https://coronavirus-bulgaria.org/static/images/open_graph_linechart.png?v=${process.env.BUILD_ID}`,\n              width: 1200,\n              height: 630,\n              alt: 'Хронология на заразата',\n            },\n          ],\n        }}\n      />\n      <Container fluid>\n        <div className=\"d-sm-flex align-items-center justify-content-between my-4\">\n          <h1 className=\"h3 mb-0 text-gray-800\">Начало</h1>\n        </div>\n        <Badge variant=\"info\">\n          Последна актуализация:&nbsp;\n          <Moment format=\"DD.MM.YYYY г. в HH:mm ч.\">\n            {totalsData.timestamp}\n          </Moment>\n        </Badge>\n        <CasesOverview\n          infected={totalsData.infected}\n          cured={totalsData.cured}\n          fatal={totalsData.fatal}\n        />\n        <Row>\n          <Col>\n            <Card className=\"shadow mb-4\">\n              <Card.Header className=\"py-3 d-flex flex-row align-items-center justify-content-between\">\n                <h6 className=\"m-0 font-weight-bold text-primary\">Хронология на заразата</h6>\n              </Card.Header>\n              <Card.Body>\n                <CasesLineChart data={lineChartData} />\n              </Card.Body>\n            </Card>\n          </Col>\n        </Row>\n        <Row>\n          <Col>\n            <Card className=\"shadow mb-4\">\n              <Card.Header className=\"py-3 d-flex flex-row align-items-center justify-content-between\">\n                <h6 className=\"m-0 font-weight-bold text-primary\">Статистика по дни</h6>\n              </Card.Header>\n              <Card.Body>\n                <CasesBarChart data={barChartData} />\n              </Card.Body>\n            </Card>\n          </Col>\n        </Row>\n      </Container>\n    </BaseLayout>\n  );\n};\n\nIndex.getInitialProps = async function () {\n  const totalsDataset = await fetch('https://raw.githubusercontent.com/COVID-19-Bulgaria/covid-database/master/Bulgaria/TotalsDataset.json');\n  const totalsData = await totalsDataset.json();\n\n  const dateCasesDataset = await fetch('https://raw.githubusercontent.com/COVID-19-Bulgaria/covid-database/master/Bulgaria/DateCasesDataset.json');\n  const dateCasesData = await dateCasesDataset.json();\n\n  const dateDiffCasesDataset = await fetch('https://raw.githubusercontent.com/COVID-19-Bulgaria/covid-database/master/Bulgaria/DateDiffCasesDataset.json');\n  const dateDiffCasesData = await dateDiffCasesDataset.json();\n\n  return {\n    totalsData,\n    dateCasesData,\n    dateDiffCasesData,\n  };\n};\n\nexport default Index;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAIA;AACA;AAEA;AACA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAKA;AALA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAQA;AARA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAWA;AACA;AAZA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAcA;AACA;AACA;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAmBA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAJA;AAFA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AACA;AADA;AAEA;AAFA;AAAA;AACA;AADA;AAIA;AAJA;AAAA;AACA;AADA;AAKA;AALA;AAAA;AACA;AADA;AAOA;AAPA;AAAA;AACA;AADA;AAQA;AARA;AAWA;AACA;AACA;AAHA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAgBA;;;;A","sourceRoot":""}