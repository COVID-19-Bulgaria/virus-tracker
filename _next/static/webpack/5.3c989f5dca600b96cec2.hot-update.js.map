{"version":3,"file":"static/webpack/5.3c989f5dca600b96cec2.hot-update.js","sources":["webpack:///./simulations/sketches/Immunity.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { useRef, useEffect } from 'react';\nimport P5 from 'p5';\nimport { setupCanvas } from '../SketchHelpers';\nimport Person from '../Person';\nimport DiseaseState from '../DiseaseState';\nimport { checkCollision, changeDirections } from '../Physics';\n\nconst Immunity = (props) => {\n  const {\n    backgroundColor,\n  } = props;\n\n  const canvasWidth = 300;\n  const canvasHeight = 100;\n\n  const containerRef = useRef();\n\n  const sketch = (p) => {\n    const population = [];\n\n    const setupPopulation = () => {\n      population[0] = new Person({\n        x: 100,\n        y: 48,\n        horizontalSpeed: 1,\n        verticalSpeed: 0,\n        radius: 30,\n        state: DiseaseState.INFECTED,\n        p5: p,\n      });\n\n      population[1] = new Person({\n        x: 170,\n        y: 48,\n        horizontalSpeed: 0,\n        verticalSpeed: 0,\n        radius: 30,\n        state: DiseaseState.CURED,\n        p5: p,\n      });\n    };\n\n    p.setup = () => {\n      setupCanvas(p, canvasWidth, canvasHeight);\n      setupPopulation();\n    };\n\n    p.draw = () => {\n      p.background(backgroundColor);\n\n      population.forEach((person) => {\n        person.move();\n\n        population.forEach((other) => {\n          if (other === person) return;\n          if (other.state === DiseaseState.FATAL) return;\n\n          if (checkCollision(person, other)) {\n            changeDirections(person, other);\n\n            if (person.state === other.state) return;\n            if (person.state === DiseaseState.CURED || other.state === DiseaseState.CURED) return;\n\n            person.state = DiseaseState.INFECTED;\n            other.state = DiseaseState.INFECTED;\n          }\n        });\n\n        person.render();\n      });\n    };\n  };\n\n  useEffect(() => {\n    // eslint-disable-next-line no-new\n    new P5(sketch, containerRef.current);\n  });\n\n  return (\n    <div id=\"immunity\" ref={containerRef} />\n  );\n};\n\nImmunity.propTypes = {\n  backgroundColor: PropTypes.string,\n};\n\nImmunity.defaultProps = {\n  backgroundColor: '#f8f9fc',\n};\n\nexport default Immunity;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAKA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AADA;AAIA;AACA;AADA;AAIA;;;;A","sourceRoot":""}